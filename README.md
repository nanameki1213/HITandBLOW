# HITandBLOW

C言語でヒットアンドブローを作成する手順を以下に示します。

## 完成したゲームを遊んでみる

タグから完成したC言語のコードをダウンロードして実行する

## ゲームを実装するために何が必要か考えてみる

いきなりコードを書き始めるのではなく、まずおおまかにこのゲームの設計を考える
タグからコードをダウンロード

### プロトタイプの説明

prototype.c内の、1.から5.までをひとつづつ完成させていきます。
コードを書く前に、既に書かれている部分の説明を行います。

#### 変数の説明

このゲームを作るうえで、どのような変数が必要になってくるのか
```prototype.c
int main(void) {
  int ans[DIGITS_NUM];
  int i, j;
  int hit_num = 0, blow_num = 0;
```
main関数内の初めの2行は、変数宣言が行われています。正解の3桁を格納するansという名前のint型配列と、繰返しのインデックスとして後々使うiとjを宣言しています。DIGITS_NUMについては後述します。さらに、hit_num, blow_numはそれぞれヒット数、ブロー数を格納するために用意しています。hit_num, blow_numについては、後にカウントを行うため、0で初期化しています。
```prototype.c
while(/* プレイヤーが正解しない間 */) {
    int input[DIGITS_NUM];
```
ゲームの進行部分にあたるループの中でも、変数宣言が行われています。inputという配列は、プレイヤーの入力した数を格納するために用意されています。

ここまでの変数をまとめると、以下の様になります。
| 変数名 | 役割 | 生存期間 |
| ---- | ---- | ---- |
| ans | 正解を格納 |
| input | プレイヤーの回答を格納 | 
| i | 繰り返しのインデックスとして使用 |
| j | 繰り返しのインデックスとして使用 |
| hit_num | ヒット数を格納 |
| blow_num | ブロー数を格納 |

#### プリプロセス部分の説明
```prototype.c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define DIGITS_NUM 3
```
このコードの始めには、いつもの定型文である#include <stdio.h>に加えて、いろいろなものが書いてあります。特徴は、すべて文頭に#がついていることです。C言語では文頭に#がつく文は特別で、普通のC言語の文(printfなど)がコンパイラによって処理されるのに対して、#がつく文はプリプロセッサと呼ばれるものに処理されます。英語で接頭辞プリ(pre)は、前という意味があります。つまり、プリプロセッサとは、コンパイラによる処理の前に行われる処理、ということになります。ここでは#includeと#defineのみ簡単に説明します。
##### #include
#include は、指定されたファイルを読み込みます。例えば#include <stdio.h>では、stdio.hというファイルをどこかから引っ張ってきて、このファイルに展開しているということです。stdio.hにはいったい何が入っているのでしょうか。いつも使っているprintfやscanfなどです。stdio、とは、standard input/outputを略したファイル名で、その名の通り、基本的な入出力の関数たちを格納しています。stdio.hを#includeで読み込むことで、printやscanfを読み込んでいることになります。逆に言えば、これをincludeしないと、それらの関数は使えないということです。C言語単体では、画面表示の機能まではサポートしていません。今回のプログラムでは事情によりstdio.hだけでなくstdlib.h、time.hもincludeしています。

##### #define
今回のプログラムで本当に大事なのはこっちです。#defineとは、マクロ機能などとも呼ばれ、プログラム中の文字列をあらかじめ定義した規則にしたがって置換する機能です。定数として考えると手っ取り早く理解できると思います。マクロ機能があるとなぜいいのかをストーリーで示します。
```prototype.c
#include <stdio.h>

int main(void) {
  int ans[3];
  return 0;
}
```
このプログラムは、要素数3のint型配列を宣言します。この3という数字は桁数を表しているのです。しかしこの説明なしにいきなりプログラムを見せられると、この3という数字が何を意味しているのかわかりません。マクロ機能を使って同じことをするプログラムを次に示します。
```prototype.c
#include <stdio.h>
#define DIGITS_NUM 3

int main(void) {
  int ans[DIGITS_NUM];
  return 0;
}
```
DIGITS_NUMというマクロを追加して、配列の宣言に用いています。DIGITS_NUMとは、翻訳すると桁数です。これにより、プログラムが幾分みやすくなりました。

